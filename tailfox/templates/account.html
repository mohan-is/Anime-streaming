<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Anime Streaming - Create Account</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap');

        body {
            margin: 0;
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
            background: url("{% static 'Images/your_anime_background.gif' %}") center/cover no-repeat fixed;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* Floating particles */
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #ff00cc, #00ffe7);
            border-radius: 50%;
            pointer-events: none;
            animation: floatParticle linear infinite;
        }

        @keyframes floatParticle {
            0% { transform: translateY(0) translateX(0) scale(1); opacity: 1; }
            50% { transform: translateY(-100px) translateX(20px) scale(1.1); opacity: 0.7; }
            100% { transform: translateY(-200px) translateX(-20px) scale(1); opacity: 0; }
        }

        /* Form card */
        .form-card {
            width: 100%;
            max-width: 400px;
            padding: 20px 25px; /* reduced padding */
            border-radius: 20px;
            background: rgba(10,10,25,0.8);
            backdrop-filter: blur(10px);
            box-shadow: 0 0 25px rgba(255,0,255,0.3), 0 0 50px rgba(0,255,255,0.2);
            z-index: 2;
            text-align: center;
            color: white;
        }

        h1 {
            font-size: 28px; /* smaller font */
            background: linear-gradient(90deg,#ff00cc,#00ffe7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px; /* reduced margin */
        }

        input[type=text], input[type=email], input[type=password] {
            width: 100%;
            padding: 10px; /* smaller padding */
            margin: 6px 0; /* smaller spacing */
            border-radius: 10px;
            border: none;
            outline: none;
            font-size: 14px; /* smaller font */
            background: rgba(0,0,0,0.5);
            color: white;
            box-shadow: inset 0 0 8px rgba(255,0,255,0.3);
            transition: 0.3s;
        }

        input:focus {
            box-shadow: 0 0 12px #00ffe7, inset 0 0 12px #ff00cc;
        }

        button {
            width: 100%;
            padding: 12px; /* smaller padding */
            border-radius: 25px;
            border: none;
            background: linear-gradient(135deg,#ff00cc,#00ffe7);
            color: black;
            font-weight: 700;
            letter-spacing: 1px;
            cursor: pointer;
            margin-top: 8px;
            box-shadow: 0 8px 20px rgba(255,0,255,0.4);
            transition: 0.3s;
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px #ff00cc, 0 0 40px #00ffe7;
        }

        .fa-close {
            position: fixed;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 24px;
            text-shadow: 0 0 12px #00ffe7;
            z-index: 3;
        }
    </style>
</head>
<body>

<a href="{% url 'login' %}"><i class="fa fa-close"></i></a>

<div class="form-card">
    <form action="{% url 'userData' %}" method="POST" autocomplete="off">
        {% csrf_token %}
        <h1>Create Account</h1>

        <input type="text" placeholder="Firstname" name="firstnamelog" required>
        <input type="text" placeholder="Lastname" name="lastnamelog" required>
        <input type="text" placeholder="Username" name="usernamelog" required>
        <input type="email" placeholder="Email" name="emaillog" required>
        <input type="password" placeholder="Password" name="passwordlog" required>
        <input type="password" placeholder="Confirm Password" name="confirm_password" required>
        <button type="submit">Sign Up</button>
    </form>
</div>

<script>

    // Generate particles
    const particleCount = 20; // fewer particles
    for(let i=0; i<particleCount; i++){
        let particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random()*window.innerWidth + 'px';
        particle.style.bottom = Math.random()*50 + 'px';
        particle.style.animationDuration = (2 + Math.random()*2) + 's'; // shorter animation
        document.body.appendChild(particle);
    }
</script>

<script>
document.querySelector("form").addEventListener("submit", function(e){
    e.preventDefault(); // Stop form submission initially

    // Get all input fields
    const firstname = document.querySelector("input[name='firstnamelog']").value.trim();
    const lastname = document.querySelector("input[name='lastnamelog']").value.trim();
    const username = document.querySelector("input[name='usernamelog']").value.trim();
    const email = document.querySelector("input[name='emaillog']").value.trim();
    const password = document.querySelector("input[name='passwordlog']").value.trim();
    const confirm = document.querySelector("input[name='confirm_password']").value.trim();

    // Clear previous error messages
    let errorMessages = [];

    if(firstname === "") errorMessages.push("Enter your Firstname");
    if(lastname === "") errorMessages.push("Enter your Lastname");
    if(username === "") errorMessages.push("Enter your Username");
    if(email === "") errorMessages.push("Enter your Email");
    if(password === "") errorMessages.push("Enter your Password");
    if(confirm === "") errorMessages.push("Confirm your Password");
    if(password !== "" && confirm !== "" && password !== confirm) errorMessages.push("Passwords do not match!");

    if(errorMessages.length > 0){
        alert(errorMessages.join("\n")); // Show all errors at once
    } else {
        this.submit(); // All good, submit the form
    }
});
</script>

</body>
</html>
